/*! sat_alert 13-04-2014 */
satellite=function(){function a(a,b){"use strict";for(var c,d=6378.137,e=6356.7523142,f=Math.sqrt(a.x*a.x+a.y*a.y),g=(d-e)/d,h=2*g-g*g,i=Math.atan2(a.y,a.x)-b,j=20,k=0,l=Math.atan2(a.z,Math.sqrt(a.x*a.x+a.y*a.y));j>k;)c=1/Math.sqrt(1-h*Math.sin(l)*Math.sin(l)),l=Math.atan2(a.z+d*c*h*Math.sin(l),f),k+=1;var m=f/Math.cos(l)-d*c;return{longitude:i,latitude:l,height:m}}function b(a,b){"use strict";var c=a.x*Math.cos(b)+a.y*Math.sin(b),d=a.x*-Math.sin(b)+a.y*Math.cos(b),e=a.z;return{x:c,y:d,z:e}}function c(a,b){"use strict";var c=a.x*Math.cos(b)-a.y*Math.sin(b),d=a.x*Math.sin(b)+a.y*Math.cos(b),e=a.z;return{x:c,y:d,z:e}}function d(a){"use strict";var b=a.longitude,c=a.latitude,d=a.height,e=6378.137,f=6356.7523142,g=(e-f)/e,h=2*g-g*g,i=e/Math.sqrt(1-h*Math.sin(c)*Math.sin(c)),j=(i+d)*Math.cos(c)*Math.cos(b),k=(i+d)*Math.cos(c)*Math.sin(b),l=(i*(1-h)+d)*Math.sin(c);return{x:j,y:k,z:l}}function e(a,b){"use strict";var c=a.longitude,e=a.latitude,f=(a.height,d(a)),g=b.x-f.x,h=b.y-f.y,i=b.z-f.z,j=Math.sin(e)*Math.cos(c)*g+Math.sin(e)*Math.sin(c)*h-Math.cos(e)*i,k=-Math.sin(c)*g+Math.cos(c)*h,l=Math.cos(e)*Math.cos(c)*g+Math.cos(e)*Math.sin(c)*h+Math.sin(e)*i;return{top_s:j,top_e:k,top_z:l}}function f(a){"use strict";var b=a.top_s,c=a.top_e,d=a.top_z,e=Math.sqrt(b*b+c*c+d*d),f=Math.asin(d/e),g=Math.atan2(-c,b)+w;return{azimuth:g,elevation:f,range_sat:e}}function g(a){"use strict";var b=a/w*180%360;return b>180?b=360-b:-180>b&&(b=360+b),b}function h(a){"use strict";if(a>w/2||-w/2>a)return"Err";var b=a/w*180;return b=0>b?b:b}function i(a,b,c){function d(a){return a>=0?1:-1}var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)+Math.pow(b.z-a.z,2)),f={x:b.x+c.x,y:b.y+c.y,z:b.z+c.z},g=Math.sqrt(Math.pow(f.x-a.x,2)+Math.pow(f.y-a.y,2)+Math.pow(f.z-a.z,2)),h=g-e;h*=d(h);var i=299792.458,j=1+h/i;return j}function j(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,y,z,A,B,C,D,E,F,G,H,I,J=(b.inclo,b.init),K=b.ep,L=b.inclp,M=b.nodep,N=b.argpp,O=b.mp,P=b.opsmode,Q=a.e3,R=a.ee2,S=a.peo,T=a.pgho,U=a.pho,V=a.pinco,W=a.plo,X=a.se2,Y=a.se3,Z=a.sgh2,$=a.sgh3,_=a.sgh4,ab=a.sh2,bb=a.sh3,cb=a.si2,db=a.si3,eb=a.sl2,fb=a.sl3,gb=a.sl4,hb=a.t,ib=a.xgh2,jb=a.xgh3,kb=a.xgh4,lb=a.xh2,mb=a.xh3,nb=a.xi2,ob=a.xi3,pb=a.xl2,qb=a.xl3,rb=a.xl4,sb=a.zmol,tb=a.zmos,ub=119459e-10,vb=.01675,wb=.00015835218,xb=.0549;H=tb+ub*hb,"y"===J&&(H=tb),G=H+2*vb*Math.sin(H),A=Math.sin(G),l=.5*A*A-.25,m=-.5*A*Math.cos(G),t=X*l+Y*m,B=cb*l+db*m,D=eb*l+fb*m+gb*A,v=Z*l+$*m+_*A,y=ab*l+bb*m,H=sb+wb*hb,"y"===J&&(H=sb),G=H+2*xb*Math.sin(H),A=Math.sin(G),l=.5*A*A-.25,m=-.5*A*Math.cos(G),s=R*l+Q*m,z=nb*l+ob*m,C=pb*l+qb*m+rb*A,u=ib*l+jb*m+kb*A,I=lb*l+mb*m,n=t+s,q=B+z,r=D+C,o=v+u,p=y+I,"n"===J&&(n-=S,q-=V,r-=W,o-=T,p-=U,L+=q,K+=n,f=Math.sin(L),e=Math.cos(L),L>=.2?(p/=f,o-=e*p,N+=o,M+=p,O+=r):(h=Math.sin(M),g=Math.cos(M),c=f*h,d=f*g,i=p*g+q*e*h,j=-p*h+q*e*g,c+=i,d+=j,M%=x,0>M&&"a"===P&&(M+=x),E=O+N+e*M,k=r+o-q*M*f,E+=k,F=M,M=Math.atan2(c,d),0>M&&"a"===P&&(M+=x),Math.abs(F-M)>w&&(F>M?M+=x:M-=x),O+=r,N=E-O-e*M));var yb={ep:K,inclp:L,nodep:M,argpp:N,mp:O};return yb}function k(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb=a.epoch,zb=a.ep,Ab=a.argpp,Bb=a.tc,Cb=a.inclp,Db=a.nodep,Eb=a.np,Fb=a.e3,Gb=a.ee2,Hb=a.peo,Ib=a.pgho,Jb=a.pho,Kb=a.pinco,Lb=a.plo,Mb=a.se2,Nb=a.se3,Ob=a.sgh2,Pb=a.sgh3,Qb=a.sgh4,Rb=a.sh2,Sb=a.sh3,Tb=a.si2,Ub=a.si3,Vb=a.sl2,Wb=a.sl3,Xb=a.sl4,Yb=a.xgh2,Zb=a.xgh3,$b=a.xgh4,_b=a.xh2,ac=a.xh3,bc=a.xi2,cc=a.xi3,dc=a.xl2,ec=a.xl3,fc=a.xl4,gc=a.zmol,hc=a.zmos,ic=.01675,jc=.0549,kc=29864797e-13,lc=4.7968065e-7,mc=.39785416,nc=.91744867,oc=.1945905,pc=-.98088458,qc=Eb,rc=zb,sc=Math.sin(Db),tc=Math.cos(Db),uc=Math.sin(Ab),vc=Math.cos(Ab),wc=Math.sin(Cb),xc=Math.cos(Cb),yc=rc*rc;l=1-yc;var zc=Math.sqrt(l);Hb=0,Kb=0,Lb=0,Ib=0,Jb=0;var Ac=yb+18261.5+Bb/1440;y=(4.523602-.00092422029*Ac)%x,o=Math.sin(y),n=Math.cos(y),K=.91375164-.03568096*n,L=Math.sqrt(1-K*K),H=.089683511*o/L,G=Math.sqrt(1-H*H);var Bc=5.8351514+.001944368*Ac;M=.39785416*o/L,N=G*n+.91744867*H*o,M=Math.atan2(M,N),M=Bc+M-y,C=Math.cos(M),D=Math.sin(M),A=oc,B=pc,I=nc,J=mc,E=tc,F=sc,m=kc,z=1/qc;for(var Cc=0;2>Cc;)Cc+=1,b=A*E+B*I*F,d=-B*E+A*I*F,h=-A*F+B*I*E,i=B*J,j=B*F+A*I*E,k=A*J,c=xc*h+wc*i,e=xc*j+wc*k,f=-wc*h+xc*i,g=-wc*j+xc*k,p=b*vc+c*uc,q=d*vc+e*uc,r=-b*uc+c*vc,s=-d*uc+e*vc,t=f*uc,u=g*uc,v=f*vc,w=g*vc,vb=12*p*p-3*r*r,wb=24*p*q-6*r*s,xb=12*q*q-3*s*s,mb=3*(b*b+c*c)+vb*yc,nb=6*(b*d+c*e)+wb*yc,ob=3*(d*d+e*e)+xb*yc,pb=-6*b*f+yc*(-24*p*v-6*r*t),qb=-6*(b*g+d*f)+yc*(-24*(q*v+p*w)+-6*(r*u+s*t)),rb=-6*d*g+yc*(-24*q*w-6*s*u),sb=6*c*f+yc*(24*p*t-6*r*v),tb=6*(e*f+c*g)+yc*(24*(q*t+p*u)-6*(s*v+r*w)),ub=6*e*g+yc*(24*q*u-6*s*w),mb=mb+mb+l*vb,nb=nb+nb+l*wb,ob=ob+ob+l*xb,hb=m*z,gb=-.5*hb/zc,ib=hb*zc,fb=-15*rc*ib,jb=p*r+q*s,kb=q*r+p*s,lb=q*s-p*r,1===Cc&&(O=fb,P=gb,Q=hb,R=ib,S=jb,T=kb,U=lb,V=mb,W=nb,X=ob,Y=pb,Z=qb,$=rb,_=sb,ab=tb,bb=ub,cb=vb,db=wb,eb=xb,A=C,B=D,I=K,J=L,E=G*tc+H*sc,F=sc*G-tc*H,m=lc);gc=(4.7199672+.2299715*Ac-Bc)%x,hc=(6.2565837+.017201977*Ac)%x,Mb=2*O*T,Nb=2*O*U,Tb=2*P*Z,Ub=2*P*($-Y),Vb=-2*Q*W,Wb=-2*Q*(X-V),Xb=-2*Q*(-21-9*yc)*ic,Ob=2*R*db,Pb=2*R*(eb-cb),Qb=-18*R*ic,Rb=-2*P*ab,Sb=-2*P*(bb-_),Gb=2*fb*kb,Fb=2*fb*lb,bc=2*gb*qb,cc=2*gb*(rb-pb),dc=-2*hb*nb,ec=-2*hb*(ob-mb),fc=-2*hb*(-21-9*yc)*jc,Yb=2*ib*wb,Zb=2*ib*(xb-vb),$b=-18*ib*jc,_b=-2*gb*tb,ac=-2*gb*(ub-sb);var Dc={snodm:sc,cnodm:tc,sinim:wc,cosim:xc,sinomm:uc,cosomm:vc,day:Ac,e3:Fb,ee2:Gb,em:rc,emsq:yc,gam:Bc,peo:Hb,pgho:Ib,pho:Jb,pinco:Kb,plo:Lb,rtemsq:zc,se2:Mb,se3:Nb,sgh2:Ob,sgh3:Pb,sgh4:Qb,sh2:Rb,sh3:Sb,si2:Tb,si3:Ub,sl2:Vb,sl3:Wb,sl4:Xb,s1:fb,s2:gb,s3:hb,s4:ib,s5:jb,s6:kb,s7:lb,ss1:O,ss2:P,ss3:Q,ss4:R,ss5:S,ss6:T,ss7:U,sz1:V,sz2:W,sz3:X,sz11:Y,sz12:Z,sz13:$,sz21:_,sz22:ab,sz23:bb,sz31:cb,sz32:db,sz33:eb,xgh2:Yb,xgh3:Zb,xgh4:$b,xh2:_b,xh3:ac,xi2:bc,xi3:cc,xl2:dc,xl3:ec,xl4:fc,nm:qc,z1:mb,z2:nb,z3:ob,z11:pb,z12:qb,z13:rb,z21:sb,z22:tb,z23:ub,z31:vb,z32:wb,z33:xb,zmol:gc,zmos:hc};return Dc}function l(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,y,z,A,B,D,E,F,G,H,I,J,K,L=a.cosim,M=a.emsq,N=a.argpo,O=a.s1,P=a.s2,Q=a.s3,R=a.s4,S=a.s5,T=a.sinim,U=a.ss1,V=a.ss2,W=a.ss3,X=a.ss4,Y=a.ss5,Z=a.sz1,$=a.sz3,_=a.sz11,ab=a.sz13,bb=a.sz21,cb=a.sz23,db=a.sz31,eb=a.sz33,fb=a.t,gb=a.tc,hb=a.gsto,ib=a.mo,jb=a.mdot,kb=a.no,lb=a.nodeo,mb=a.nodedot,nb=a.xpidot,ob=a.z1,pb=a.z3,qb=a.z11,rb=a.z13,sb=a.z21,tb=a.z23,ub=a.z31,vb=a.z33,wb=a.ecco,xb=a.eccsq,yb=a.em,zb=a.argpm,Ab=a.inclm,Bb=a.mm,Cb=a.nm,Db=a.nodem,Eb=a.irez,Fb=a.atime,Gb=a.d2201,Hb=a.d2211,Ib=a.d3210,Jb=a.d3222,Kb=a.d4410,Lb=a.d4422,Mb=a.d5220,Nb=a.d5232,Ob=a.d5421,Pb=a.d5433,Qb=a.dedt,Rb=a.didt,Sb=a.dmdt,Tb=a.dnodt,Ub=a.domdt,Vb=a.del1,Wb=a.del2,Xb=a.del3,Yb=a.xfact,Zb=a.xlamo,$b=a.xli,_b=a.xni,ac=17891679e-13,bc=21460748e-13,cc=2.2123015e-7,dc=17891679e-13,ec=7.3636953e-9,fc=2.1765803e-9,gc=.0043752690880113,hc=3.7393792e-7,ic=1.1428639e-7,jc=2/3,kc=.00015835218,lc=119459e-10;Eb=0,.0052359877>(Cb>.0034906585)&&(Eb=1),.00924>=(Cb>=.00826)&&yb>=.5&&(Eb=2);var mc=U*lc*Y,nc=V*lc*(_+ab),oc=-lc*W*(Z+$-14-6*M),pc=X*lc*(db+eb-6),qc=-lc*V*(bb+cb);(.052359877>Ab||Ab>w-.052359877)&&(qc=0),0!==T&&(qc/=T);var rc=pc-L*qc;Qb=mc+O*kc*S,Rb=nc+P*kc*(qb+rb),Sb=oc-kc*Q*(ob+pb-14-6*M);var sc=R*kc*(ub+vb-6),tc=-kc*P*(sb+tb);(.052359877>Ab||Ab>w-.052359877)&&(tc=0),Ub=rc+sc,Tb=qc,0!==T&&(Ub-=L/T*tc,Tb+=tc/T);var uc=0;if(F=(hb+gb*gc)%x,yb+=Qb*fb,Ab+=Rb*fb,zb+=Ub*fb,Db+=Tb*fb,Bb+=Sb*fb,0!==Eb){if(I=Math.pow(Cb/C,jc),2===Eb){J=L*L;var vc=yb;yb=wb;var wc=M;M=xb,K=yb*M,o=-.306-.44*(yb-.64),.65>=yb?(p=3.616-13.247*yb+16.29*M,r=-19.302+117.39*yb-228.419*M+156.591*K,s=-18.9068+109.7927*yb-214.6334*M+146.5816*K,t=-41.122+242.694*yb-471.094*M+313.953*K,u=-146.407+841.88*yb-1629.014*M+1083.435*K,v=-532.114+3017.977*yb-5740.032*M+3708.276*K):(p=-72.099+331.819*yb-508.738*M+266.724*K,r=-346.844+1582.851*yb-2415.925*M+1246.113*K,s=-342.585+1554.908*yb-2366.899*M+1215.972*K,t=-1052.797+4758.686*yb-7193.992*M+3651.957*K,u=-3581.69+16178.11*yb-24462.77*M+12422.52*K,v=yb>.715?-5149.66+29936.92*yb-54087.36*M+31324.56*K:1464.74-4664.75*yb+3763.64*M),.7>yb?(A=-919.2277+4988.61*yb-9064.77*M+5542.21*K,y=-822.71072+4568.6173*yb-8491.4146*M+5337.524*K,z=-853.666+4690.25*yb-8624.77*M+5341.4*K):(A=-37995.78+161616.52*yb-229838.2*M+109377.94*K,y=-51752.104+218913.95*yb-309468.16*M+146349.42*K,z=-40023.88+170470.89*yb-242699.48*M+115605.82*K),B=T*T,b=.75*(1+2*L+J),c=1.5*B,e=1.875*T*(1-2*L-3*J),f=-1.875*T*(1+2*L-3*J),h=35*B*b,i=39.375*B*B,j=9.84375*T*(B*(1-2*L-5*J)+.33333333*(-2+4*L+6*J)),k=T*(4.92187512*B*(-2-4*L+10*J)+6.56250012*(1+2*L-3*J)),l=29.53125*T*(2-8*L+J*(-12+8*L+10*J)),m=29.53125*T*(-2-8*L+J*(12+8*L-10*J)),G=Cb*Cb,H=I*I,E=3*G*H,D=E*dc,Gb=D*b*o,Hb=D*c*p,E*=I,D=E*hc,Ib=D*e*r,Jb=D*f*s,E*=I,D=2*E*ec,Kb=D*h*t,Lb=D*i*u,E*=I,D=E*ic,Mb=D*j*v,Nb=D*k*z,D=2*E*fc,Ob=D*l*y,Pb=D*m*A,Zb=(ib+lb+lb-F-F)%x,Yb=jb+Sb+2*(mb+Tb-gc)-kb,yb=vc,M=wc}1===Eb&&(n=1+M*(-2.5+.8125*M),r=1+2*M,q=1+M*(-6+6.60937*M),b=.75*(1+L)*(1+L),d=.9375*T*T*(1+3*L)-.75*(1+L),g=1+L,g=1.875*g*g*g,Vb=3*Cb*Cb*I*I,Wb=2*Vb*b*n*ac,Xb=3*Vb*g*q*cc*I,Vb=Vb*d*r*bc*I,Zb=(ib+lb+N-F)%x,Yb=jb+nb-gc+Sb+Ub+Tb-kb),$b=Zb,_b=kb,Fb=0,Cb=kb+uc}var xc={em:yb,argpm:zb,inclm:Ab,mm:Bb,nm:Cb,nodem:Db,irez:Eb,atime:Fb,d2201:Gb,d2211:Hb,d3210:Ib,d3222:Jb,d4410:Kb,d4422:Lb,d5220:Mb,d5232:Nb,d5421:Ob,d5433:Pb,dedt:Qb,didt:Rb,dmdt:Sb,dndt:uc,dnodt:Tb,domdt:Ub,del1:Vb,del2:Wb,del3:Xb,xfact:Yb,xlamo:Zb,xli:$b,xni:_b};return xc}function m(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l=a.irez,m=a.d2201,n=a.d2211,o=a.d3210,p=a.d3222,q=a.d4410,r=a.d4422,s=a.d5220,t=a.d5232,u=a.d5421,v=a.d5433,w=a.dedt,y=a.del1,z=a.del2,A=a.del3,B=a.didt,C=a.dmdt,D=a.dnodt,E=a.domdt,F=a.argpo,G=a.argpdot,H=a.t,I=a.tc,J=a.gsto,K=a.xfact,L=a.xlamo,M=a.no,N=a.atime,O=a.em,P=a.argpm,Q=a.inclm,R=a.xli,S=a.mm,T=a.xni,U=a.nodem,V=a.nm,W=.13130908,X=2.8843198,Y=.37448087,Z=5.7686396,$=.95240898,_=1.8014998,ab=1.050833,bb=4.4108898,cb=.0043752690880113,db=720,eb=-720,fb=259200,gb=0;if(d=(J+I*cb)%x,O+=w*H,Q+=B*H,P+=E*H,U+=D*H,S+=C*H,c=0,0!==l){(0===N||0>=H*N||Math.abs(H)<Math.abs(N))&&(N=0,T=M,R=L),b=H>0?db:eb;for(var hb=381,ib=0;381===hb;)2!==l?(j=y*Math.sin(R-W)+z*Math.sin(2*(R-X))+A*Math.sin(3*(R-Y)),h=T+K,i=y*Math.cos(R-W)+2*z*Math.cos(2*(R-X))+3*A*Math.cos(3*(R-Y)),i*=h):(k=F+G*N,f=k+k,e=R+R,j=m*Math.sin(f+R-Z)+n*Math.sin(R-Z)+o*Math.sin(k+R-$)+p*Math.sin(-k+R-$)+q*Math.sin(f+e-_)+r*Math.sin(e-_)+s*Math.sin(k+R-ab)+t*Math.sin(-k+R-ab)+u*Math.sin(k+e-bb)+v*Math.sin(-k+e-bb),h=T+K,i=m*Math.cos(f+R-Z)+n*Math.cos(R-Z)+o*Math.cos(k+R-$)+p*Math.cos(-k+R-$)+s*Math.cos(k+R-ab)+t*Math.cos(-k+R-ab)+2*(q*Math.cos(f+e-_)+r*Math.cos(e-_)+u*Math.cos(k+e-bb)+v*Math.cos(-k+e-bb)),i*=h),Math.abs(H-N)>=db?(ib=0,hb=381):(c=H-N,hb=0),381===hb&&(R=R+h*b+j*fb,T=T+j*b+i*fb,N+=b);V=T+j*c+i*c*c*.5,g=R+h*c+j*c*c*.5,1!==l?(S=g-2*U+2*d,gb=V-M):(S=g-U-P+d,gb=V-M),V=M+gb}var jb={atime:N,em:O,argpm:P,inclm:Q,xli:R,mm:S,xni:T,nodem:U,dndt:gb,nm:V};return jb}function n(a){"use strict";var b=(a-2451545)/36525,c=-62e-7*b*b*b+.093104*b*b+3164400184.812866*b+67310.54841;return c=c*y/240%x,0>c&&(c+=x),c}function o(a,b){"use strict";var c=[31,28,31,30,31,30,31,31,30,31,30,31],d=Math.floor(b);a%4===0&&(c=[31,29,31,30,31,30,31,31,30,31,30,31]);for(var e=1,f=0;d>f+c[e-1]&&12>e;)f+=c[e-1],e+=1;var g=e,h=d-f,i=24*(b-d),j=Math.floor(i);i=60*(i-j);var k=Math.floor(i),l=60*(i-k),m={mon:g,day:h,hr:j,minute:k,sec:l};return m}function p(a,b,c,d,e,f){"use strict";return 367*a-Math.floor(7*(a+Math.floor((b+9)/12))*.25)+Math.floor(275*b/9)+c+1721013.5+((f/60+e)/60+d)/24}function q(a){"use strict";var b,c,d,e,f,g=(a.satn,a.ecco),h=a.epoch,i=a.inclo,j=a.no,k=a.method,l=a.opsmode,m=g*g,o=1-m,p=Math.sqrt(o),q=Math.cos(i),r=q*q;b=Math.pow(C/j,I),c=.75*E*(3*r-1)/(p*o);var s=c/(b*b);d=b*(1-s*s-s*(1/3+134*s*s/81)),s=c/(d*d),j/=1+s;var t=Math.pow(C/j,I),u=Math.sin(i);e=t*o;var v=1-5*r,w=-v-r-r,y=1/t,z=e*e,A=t*(1-g);if(k="n","a"===l){var B=h-7305,D=Math.floor(B+1e-8),F=B-D,G=.017202791694070362,H=1.7321343856509375,J=5.075514194322695e-15,K=G+x;f=(H+G*D+K*F+B*B*J)%x,0>f&&(f+=x)}else f=n(h+2433281.5);var L={no:j,method:k,ainv:y,ao:t,con41:w,con42:v,cosio:q,cosio2:r,eccsq:m,omeosq:o,posq:z,rp:A,rteosq:p,sinio:u,gsto:f};return L}function r(a,b){"use strict";var c="i",d=1440/(2*w),e=0,f=0,g=0,h={};h.error=0;parseInt(a.substring(0,1),10);h.satnum=a.substring(2,7);a.substring(7,8),a.substring(9,11);h.epochyr=parseInt(a.substring(18,20),10),h.epochdays=parseFloat(a.substring(20,32)),h.ndot=parseFloat(a.substring(33,43)),h.nddot=parseFloat("."+parseInt(a.substring(44,50),10)+"E"+a.substring(50,52)),h.bstar=parseFloat("."+parseInt(a.substring(53,59),10)+"E"+a.substring(59,61));parseInt(a.substring(62,63),10);f=parseInt(a.substring(64,68),10),h.inclo=parseFloat(b.substring(8,16)),h.nodeo=parseFloat(b.substring(17,25)),h.ecco=parseFloat("."+b.substring(26,33)),h.argpo=parseFloat(b.substring(34,42)),h.mo=parseFloat(b.substring(43,51)),h.no=parseFloat(b.substring(52,63)),e=parseFloat(b.substring(63,68)),h.no=h.no/d,h.a=Math.pow(h.no*D,-2/3),h.ndot=h.ndot/(1440*d),h.nddot=h.nddot/(1440*d*1440),h.inclo=h.inclo*y,h.nodeo=h.nodeo*y,h.argpo=h.argpo*y,h.mo=h.mo*y,h.alta=h.a*(1+h.ecco)-1,h.altp=h.a*(1-h.ecco)-1,g=h.epochyr<57?h.epochyr+2e3:h.epochyr+1900;var i=o(g,h.epochdays),j=i.mon,k=i.day,l=i.hr,m=i.minute,n=i.sec;h.jdsatepoch=p(g,j,k,l,m,n);var q={opsmode:c,satn:h.satnum,epoch:h.jdsatepoch-2433281.5,xbstar:h.bstar,xecco:h.ecco,xargpo:h.argpo,xinclo:h.inclo,xmo:h.mo,xno:h.no,xnodeo:h.nodeo};return u(h,q),h}function s(a,b,c,d,e,f,g){"use strict";var h=p(b,c,d,e,f,g),i=(h-a.jdsatepoch)*z;return t(a,i)}function t(a,b){"use strict";var c,d,e,f,g,h,i,k,l,n,o,p,q,r,s,t,u,v,y,z,A,D,F,G,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db=0,Eb=1.5e-12,Fb=B*C/60;a.t=b,a.error=0,xb=a.mo+a.mdot*a.t;var Gb=a.argpo+a.argpdot*a.t;if(Ab=a.nodeo+a.nodedot*a.t,O=Gb,pb=xb,Y=a.t*a.t,rb=Ab+a.nodecf*Y,eb=1-a.cc1*a.t,fb=a.bstar*a.cc4*a.t,gb=a.t2cof*Y,1!==a.isimp){F=a.omgcof*a.t;var Hb=1+a.eta*Math.cos(xb);D=a.xmcof*(Hb*Hb*Hb-a.delmo),bb=F+D,pb=xb+bb,O=Gb-bb,Z=Y*a.t,$=Z*a.t,eb=eb-a.d2*Y-a.d3*Z-a.d4*$,fb+=a.bstar*a.cc5*(Math.sin(pb)-a.sinmao),gb=gb+a.t3cof*Z+$*(a.t4cof+a.t*a.t5cof)}qb=a.no;var Ib=a.ecco;if(ob=a.inclo,"d"===a.method){_=a.t;{var Jb={irez:a.irez,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,del1:a.del1,del2:a.del2,del3:a.del3,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,argpo:a.argpo,argpdot:a.argpdot,t:a.t,tc:_,gsto:a.gsto,xfact:a.xfact,xlamo:a.xlamo,no:a.no,atime:a.atime,em:Ib,argpm:O,inclm:ob,xli:a.xli,mm:pb,xni:a.xni,nodem:rb,nm:qb},Kb=m(Jb);Kb.atime}Ib=Kb.em,O=Kb.argpm,ob=Kb.inclm;{Kb.xli}pb=Kb.mm;{Kb.xni}rb=Kb.nodem,G=Kb.dndt,qb=Kb.nm}if(0>=qb)return a.error=2,[!1,!1];if(c=Math.pow(C/qb,I)*eb*eb,qb=C/Math.pow(c,1.5),Ib-=fb,Ib>=1||-.001>Ib)return a.error=1,[!1,!1];1e-6>Ib&&(Ib=1e-6),pb+=a.no*gb,vb=pb+O+rb,J=Ib*Ib,bb=1-J,rb%=x,O%=x,vb%=x,pb=(vb-O-rb)%x,h=Math.sin(ob),g=Math.cos(ob);var Lb=Ib;if(tb=ob,P=O,Cb=rb,wb=pb,t=h,s=g,"d"===a.method){var Mb={inclo:a.inclo,init:"n",ep:Lb,inclp:tb,nodep:Cb,argpp:P,mp:wb,opsmode:a.operationmod},Nb=j(a,Mb);if(Lb=Nb.ep,tb=Nb.inclp,Cb=Nb.nodep,P=Nb.argpp,wb=Nb.mp,0>tb&&(tb=-tb,Cb+=w,P-=w),0>Lb||Lb>1)return a.error=3,[!1,!1]}"d"===a.method&&(t=Math.sin(tb),s=Math.cos(tb),a.aycof=-.5*H*t,a.xlcof=Math.abs(s+1)>1.5e-12?-.25*H*t*(3+5*s)/(1+s):-.25*H*t*(3+5*s)/Eb),d=Lb*Math.cos(P),bb=1/(c*(1-Lb*Lb)),e=Lb*Math.sin(P)+bb*a.aycof,ub=wb+P+Cb+bb*a.xlcof*d,hb=(ub-Cb)%x,M=hb,ab=9999.9;for(var Ob=1;Math.abs(ab)>=1e-12&&10>=Ob;)p=Math.sin(M),o=Math.cos(M),ab=1-o*d-p*e,ab=(hb-e*o+d*p-M)/ab,Math.abs(ab)>=.95&&(ab=ab>0?.95:-.95),M+=ab,Ob+=1;if(K=d*o+e*p,N=d*p-e*o,L=d*d+e*e,Q=c*(1-L),0>Q)return a.error=4,[!1,!1];U=c*(1-K),T=Math.sqrt(c)*N/U,W=Math.sqrt(Q)/U,f=Math.sqrt(1-L),bb=N/(1+f),A=c/U*(p-e-d*bb),z=c/U*(o-d+e*bb),X=Math.atan2(A,z),n=(z+z)*A,l=1-2*A*A,bb=1/Q,cb=.5*E*bb,db=cb*bb,"d"===a.method&&(u=s*s,a.con41=3*u-1,a.x1mth2=1-u,a.x7thm1=7*u-1),Db=U*(1-1.5*db*f*a.con41)+.5*cb*a.x1mth2*l,X-=.25*db*a.x7thm1*n,Bb=Cb+1.5*db*s*n,sb=tb+1.5*db*s*t*l;var Pb=T-qb*cb*a.x1mth2*n/C;return V=W+qb*cb*(a.x1mth2*l+1.5*a.con41)/C,y=Math.sin(X),v=Math.cos(X),k=Math.sin(Bb),i=Math.cos(Bb),r=Math.sin(sb),q=Math.cos(sb),yb=-k*q,zb=i*q,ib=yb*y+i*v,jb=zb*y+k*v,kb=r*y,lb=yb*v-i*y,mb=zb*v-k*y,nb=r*v,R={x:0,y:0,z:0},R.x=Db*ib*B,R.y=Db*jb*B,R.z=Db*kb*B,S={x:0,y:0,z:0},S.x=(Pb*ib+V*lb)*Fb,S.y=(Pb*jb+V*mb)*Fb,S.z=(Pb*kb+V*nb)*Fb,1>Db?(a.error=6,{position:!1,velocity:!1}):{position:R,velocity:S}}function u(a,b){"use strict";var c,d,e,f,g,h,i,m,n,o,p,r,s,u,v,x,y,z,A,C,D,F,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb=b.opsmode,Kb=b.satn,Lb=b.epoch,Mb=b.xbstar,Nb=b.xecco,Ob=b.xargpo,Pb=b.xinclo,Qb=b.xmo,Rb=b.xno,Sb=b.xnodeo;tb=1.5e-12,a.isimp=0,a.method="n",a.aycof=0,a.con41=0,a.cc1=0,a.cc4=0,a.cc5=0,a.d2=0,a.d3=0,a.d4=0,a.delmo=0,a.eta=0,a.argpdot=0,a.omgcof=0,a.sinmao=0,a.t=0,a.t2cof=0,a.t3cof=0,a.t4cof=0,a.t5cof=0,a.x1mth2=0,a.x7thm1=0,a.mdot=0,a.nodedot=0,a.xlcof=0,a.xmcof=0,a.nodecf=0,a.irez=0,a.d2201=0,a.d2211=0,a.d3210=0,a.d3222=0,a.d4410=0,a.d4422=0,a.d5220=0,a.d5232=0,a.d5421=0,a.d5433=0,a.dedt=0,a.del1=0,a.del2=0,a.del3=0,a.didt=0,a.dmdt=0,a.dnodt=0,a.domdt=0,a.e3=0,a.ee2=0,a.peo=0,a.pgho=0,a.pho=0,a.pinco=0,a.plo=0,a.se2=0,a.se3=0,a.sgh2=0,a.sgh3=0,a.sgh4=0,a.sh2=0,a.sh3=0,a.si2=0,a.si3=0,a.sl2=0,a.sl3=0,a.sl4=0,a.gsto=0,a.xfact=0,a.xgh2=0,a.xgh3=0,a.xgh4=0,a.xh2=0,a.xh3=0,a.xi2=0,a.xi3=0,a.xl2=0,a.xl3=0,a.xl4=0,a.xlamo=0,a.zmol=0,a.zmos=0,a.atime=0,a.xli=0,a.xni=0,a.bstar=Mb,a.ecco=Nb,a.argpo=Ob,a.inclo=Pb,a.mo=Qb,a.no=Rb,a.nodeo=Sb,a.operationmode=Jb;var Tb=78/B+1,Ub=42/B,Vb=Ub*Ub*Ub*Ub,Wb=2/3;a.init="y",a.t=0;var Xb={satn:Kb,ecco:a.ecco,epoch:Lb,inclo:a.inclo,no:a.no,method:a.method,opsmode:a.operationmode},Yb=q(Xb);a.no=Yb.no;var Zb=(Yb.method,Yb.ainv,Yb.ao);a.con41=Yb.con41;var $b=Yb.con42,_b=Yb.cosio,ac=Yb.cosio2,bc=Yb.eccsq,cc=Yb.omeosq,dc=Yb.posq,ec=Yb.rp,fc=Yb.rteosq,gc=Yb.sinio;if(a.gsto=Yb.gsto,a.error=0,cc>=0||a.no>=0){if(a.isimp=0,220/B+1>ec&&(a.isimp=1),W=Tb,N=Vb,K=(ec-1)*B,156>K){W=K-78,98>K&&(W=20);var hc=(120-W)/B;N=hc*hc*hc*hc,W=W/B+1}L=1/dc,ub=1/(Zb-W),a.eta=Zb*a.ecco*ub,z=a.eta*a.eta,y=a.ecco*a.eta,M=Math.abs(1-z),o=N*Math.pow(ub,4),p=o/Math.pow(M,3.5),m=p*a.no*(Zb*(1+1.5*z+y*(4+z))+.375*E*ub/M*a.con41*(8+3*z*(8+z))),a.cc1=a.bstar*m,n=0,a.ecco>1e-4&&(n=-2*o*ub*H*a.no*gc/a.ecco),a.x1mth2=1-ac,a.cc4=2*a.no*p*Zb*cc*(a.eta*(2+.5*z)+a.ecco*(.5+2*z)-E*ub/(Zb*M)*(-3*a.con41*(1-2*y+z*(1.5-.5*y))+.75*a.x1mth2*(2*z-y*(1+z))*Math.cos(2*a.argpo))),a.cc5=2*p*Zb*cc*(1+2.75*(z+y)+y*z),r=ac*ac,qb=1.5*E*L*a.no,rb=.5*qb*E*L,sb=-.46875*G*L*L*a.no,a.mdot=a.no+.5*qb*fc*a.con41+.0625*rb*fc*(13-78*ac+137*r),a.argpdot=-.5*qb*$b+.0625*rb*(7-114*ac+395*r)+sb*(3-36*ac+49*r),wb=-qb*_b,a.nodedot=wb+(.5*rb*(4-19*ac)+2*sb*(3-7*ac))*_b,vb=a.argpdot+a.nodedot,a.omgcof=a.bstar*n*Math.cos(a.argpo),a.xmcof=0,a.ecco>1e-4&&(a.xmcof=-Wb*o*a.bstar/y),a.nodecf=3.5*cc*wb*a.cc1,a.t2cof=1.5*a.cc1,a.xlcof=Math.abs(_b+1)>1.5e-12?-.25*H*gc*(3+5*_b)/(1+_b):-.25*H*gc*(3+5*_b)/tb,a.aycof=-.5*H*gc;var ic=1+a.eta*Math.cos(a.mo);if(a.delmo=ic*ic*ic,a.sinmao=Math.sin(a.mo),a.x7thm1=7*ac-1,2*w/a.no>=225){a.method="d",a.isimp=1,ob=0,F=a.inclo;var jc={epoch:Lb,ep:a.ecco,argpp:a.argpo,tc:ob,inclp:a.inclo,nodep:a.nodeo,np:a.no,e3:a.e3,ee2:a.ee2,peo:a.peo,pgho:a.pgho,pho:a.pho,pinco:a.pinco,plo:a.plo,se2:a.se2,se3:a.se3,sgh2:a.sgh2,sgh3:a.sgh3,sgh4:a.sgh4,sh2:a.sh2,sh3:a.sh3,si2:a.si2,si3:a.si3,sl2:a.sl2,sl3:a.sl3,sl4:a.sl4,xgh2:a.xgh2,xgh3:a.xgh3,xgh4:a.xgh4,xh2:a.xh2,xh3:a.xh3,xi2:a.xi2,xi3:a.xi3,xl2:a.xl2,xl3:a.xl3,xl4:a.xl4,zmol:a.zmol,zmos:a.zmos},kc=k(jc);d=kc.snodm,c=kc.cnodm,f=kc.sinim,e=kc.cosim,h=kc.sinomm,g=kc.cosomm,s=kc.day,a.e3=kc.e3,a.ee2=kc.ee2,v=kc.em,x=kc.emsq,A=kc.gam,a.peo=kc.peo,a.pgho=kc.pgho,a.pho=kc.pho,a.pinco=kc.pinco,a.plo=kc.plo,O=kc.rtemsq,a.se2=kc.se2,a.se3=kc.se3,a.sgh2=kc.sgh2,a.sgh3=kc.sgh3,a.sgh4=kc.sgh4,a.sh2=kc.sh2,a.sh3=kc.sh3,a.si2=kc.si2,a.si3=kc.si3,a.sl2=kc.sl2,a.sl3=kc.sl3,a.sl4=kc.sl4,P=kc.s1,Q=kc.s2,R=kc.s3,S=kc.s4,T=kc.s5,U=kc.s6,V=kc.s7,X=kc.ss1,Y=kc.ss2,Z=kc.ss3,$=kc.ss4,_=kc.ss5,ab=kc.ss6,bb=kc.ss7,cb=kc.sz1,db=kc.sz2,eb=kc.sz3,fb=kc.sz11,gb=kc.sz12,hb=kc.sz13,ib=kc.sz21,jb=kc.sz22,kb=kc.sz23,lb=kc.sz31,mb=kc.sz32,nb=kc.sz33,a.xgh2=kc.xgh2,a.xgh3=kc.xgh3,a.xgh4=kc.xgh4,a.xh2=kc.xh2,a.xh3=kc.xh3,a.xi2=kc.xi2,a.xi3=kc.xi3,a.xl2=kc.xl2,a.xl3=kc.xl3,a.xl4=kc.xl4,J=kc.nm,xb=kc.z1,yb=kc.z2,zb=kc.z3,Ab=kc.z11,Bb=kc.z12,Cb=kc.z13,Db=kc.z21,Eb=kc.z22,Fb=kc.z23,Gb=kc.z31,Hb=kc.z32,Ib=kc.z33,a.zmol=kc.zmol,a.zmos=kc.zmos;var lc={inclo:F,init:a.init,ep:a.ecco,inclp:a.inclo,nodep:a.nodeo,argpp:a.argpo,mp:a.mo,opsmode:a.operationmode},mc=j(a,lc);a.ecco=mc.ep,a.inclo=mc.inclp,a.nodeo=mc.nodep,a.argpo=mc.argpp,a.mo=mc.mp,C=0,D=0,I=0;var nc={cosim:e,emsq:x,argpo:a.argpo,s1:P,s2:Q,s3:R,s4:S,s5:T,sinim:f,ss1:X,ss2:Y,ss3:Z,ss4:$,ss5:_,sz1:cb,sz3:eb,sz11:fb,sz13:hb,sz21:ib,sz23:kb,sz31:lb,sz33:nb,t:a.t,tc:ob,gsto:a.gsto,mo:a.mo,mdot:a.mdot,no:a.no,nodeo:a.nodeo,nodedot:a.nodedot,xpidot:vb,z1:xb,z3:zb,z11:Ab,z13:Cb,z21:Db,z23:Fb,z31:Gb,z33:Ib,ecco:a.ecco,eccsq:bc,em:v,argpm:C,inclm:F,mm:I,nm:J,nodem:D,irez:a.irez,atime:a.atime,d2201:a.d2201,d2211:a.d2211,d3210:a.d3210,d3222:a.d3222,d4410:a.d4410,d4422:a.d4422,d5220:a.d5220,d5232:a.d5232,d5421:a.d5421,d5433:a.d5433,dedt:a.dedt,didt:a.didt,dmdt:a.dmdt,dnodt:a.dnodt,domdt:a.domdt,del1:a.del1,del2:a.del2,del3:a.del3,xfact:a.xfact,xlamo:a.xlamo,xli:a.xli,xni:a.xni},oc=l(nc);v=oc.em,C=oc.argpm,F=oc.inclm,I=oc.mm,J=oc.nm,D=oc.nodem,a.irez=oc.irez,a.atime=oc.atime,a.d2201=oc.d2201,a.d2211=oc.d2211,a.d3210=oc.d3210,a.d3222=oc.d3222,a.d4410=oc.d4410,a.d4422=oc.d4422,a.d5220=oc.d5220,a.d5232=oc.d5232,a.d5421=oc.d5421,a.d5433=oc.d5433,a.dedt=oc.dedt,a.didt=oc.didt,a.dmdt=oc.dmdt,u=oc.dndt,a.dnodt=oc.dnodt,a.domdt=oc.domdt,a.del1=oc.del1,a.del2=oc.del2,a.del3=oc.del3,a.xfact=oc.xfact,a.xlamo=oc.xlamo,a.xli=oc.xli,a.xni=oc.xni}1!==a.isimp&&(i=a.cc1*a.cc1,a.d2=4*Zb*ub*i,pb=a.d2*ub*a.cc1/3,a.d3=(17*Zb+W)*pb,a.d4=.5*pb*Zb*ub*(221*Zb+31*W)*a.cc1,a.t3cof=a.d2+2*i,a.t4cof=.25*(3*a.d3+a.cc1*(12*a.d2+10*i)),a.t5cof=.2*(3*a.d4+12*a.cc1*a.d3+6*a.d2*a.d2+15*i*(2*a.d2+i)))}return t(a,0),a.init="n",!0}var v={version:"1.2"},w=Math.PI,x=2*w,y=w/180,z=1440,A=398600.5,B=6378.137,C=60/Math.sqrt(B*B*B/A),D=1/C,E=.00108262998905,F=-253215306e-14,G=-161098761e-14,H=F/E,I=2/3;return v.eci_to_geodetic=function(b,c){return a(b,c)},v.ecf_to_look_angles=function(a,b){var c=e(a,b);return f(c)},v.geodetic_to_ecf=function(a){return d(a)},v.ecf_to_eci=function(a,b){return c(a,b)},v.eci_to_ecf=function(a,c){return b(a,c)},v.degrees_lat=function(a){return h(a)},v.degrees_long=function(a){return g(a)},v.doppler_factor=i,v.gstime_from_jday=function(a){return n(a)},v.gstime_from_date=function(a,b,c,d,e,f){var g=p(a,b,c,d,e,f);return n(g)},v.twoline2satrec=function(a,b){return r(a,b)},v.propagate=function(a,b,c,d,e,f,g){return s(a,b,c,d,e,f,g)},v.sgp4=function(a,b){return t(a,b)},v}(),function(){"use strict";function a(a){return a.valueOf()/x-.5+y}function b(a){return new Date((a+.5-y)*x)}function c(b){return a(b)-z}function d(a,b){return u(q(a)*r(A)-s(b)*q(A),r(a))}function e(a,b){return t(q(b)*r(A)+r(b)*q(A)*q(a))}function f(a,b,c){return u(q(a),r(a)*q(b)-s(c)*r(b))}function g(a,b,c){return t(q(b)*q(c)+r(b)*r(c)*r(a))}function h(a,b){return w*(280.16+360.9856235*a)-b}function i(a){return w*(357.5291+.98560028*a)}function j(a){var b=w*(1.9148*q(a)+.02*q(2*a)+3e-4*q(3*a)),c=102.9372*w;return a+b+c+p}function k(a){var b=i(a),c=j(b);return{dec:e(c,0),ra:d(c,0)}}function l(a,b){return Math.round(a-D-b/(2*p))}function m(a,b,c){return D+(a+b)/(2*p)+c}function n(a,b,c){return z+a+.0053*q(b)-.0069*q(2*c)}function o(a,b,c){return v((q(a)-q(b)*q(c))/(r(b)*r(c)))}var p=Math.PI,q=Math.sin,r=Math.cos,s=Math.tan,t=Math.asin,u=Math.atan2,v=Math.acos,w=p/180,x=864e5,y=2440588,z=2451545,A=23.4397*w,B={};B.getPosition=function(a,b,d){var e=w*-d,i=w*b,j=c(a),l=k(j),m=h(j,e)-l.ra;return{azimuth:f(m,i,l.dec),altitude:g(m,i,l.dec)}};var C=[[-.83,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];B.addTime=function(a,b,c){C.push([a,b,c])};var D=9e-4;B.getTimes=function(a,d,f){function g(a){var b=o(a,t,A),c=m(b,s,v);return n(c,y,z)}var h,k,p,q,r,s=w*-f,t=w*d,u=c(a),v=l(u,s),x=m(0,s,v),y=i(x),z=j(y),A=e(z,0),B=n(x,y,z),D={solarNoon:b(B),nadir:b(B-.5)};for(h=0,k=C.length;k>h;h+=1)p=C[h],q=g(p[0]*w),r=B-(q-B),D[p[1]]=b(r),D[p[2]]=b(q);return D},"function"==typeof define&&define.amd?define(B):"undefined"!=typeof module?module.exports=B:window.SunCalc=B}(),Ajax=function(a){var b=new XMLHttpRequest,c=function(a){return a.type=a.type||"GET",a},d=function(a,d){a=c(a),b.open(a.type,a.url,!0),b.onreadystatechange=function(){if(4==b.readyState){var a=b.responseText.split("\n"),c=e(a),g=f(c);200==b.status&&d(g)}},b.send()},e=function(a){for(var b={},c=0,d=0;d<a.length;d+=3)b[c]={},b[c].name=a[d],b[c].tle_line_1=a[d+1],b[c].tle_line_2=a[d+2],c+=1;return b},f=function(a){var b={};for(var c in a)a[c].tle_line_1&&(b[a[c].name]=g(a[c].tle_line_1,a[c].tle_line_2));return b},g=function(b,c){var d=a.twoline2satrec(b,c),e=new Date,f=a.propagate(d,e.getFullYear(),e.getMonth(),e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds()),g=f.position,h=a.gstime_from_date(e.getFullYear(),e.getMonth(),e.getDay(),e.getHours(),e.getMinutes(),e.getSeconds()),i=a.eci_to_geodetic(g,h),j=i.longitude,k=i.latitude,l=a.degrees_long(j),m=a.degrees_lat(k),n={};return n.lon=l,n.lat=m,n};return{request:function(a,b,c){d(a,b,c)}}}(satellite);var SatelliteFactory=function(a){this.user=a.user};SatelliteFactory.prototype={okCallback:function(a){this.user.getLocation(this.findClosest.bind(this),a)},errorCallback:function(){},findClosest:function(a,b){var c={distance:1e5};for(var d in a)distance=this.getDistanceInKilometers(a[d].lat,a[d].lon,b.coords.latitude,b.coords.longitude),distance<c.distance&&(c.name=d,c.distance=distance,c.lat=a[d].lat,c.lon=a[d].lon);var e=new SpaceObject(c,b);e.setVisibility(b.coords)},getDistanceInKilometers:function(a,b,c,d){var e=(c-a).toRad(),f=(d-b).toRad(),g=Math.sin(e/2)*Math.sin(e/2)+Math.cos(a.toRad())*Math.cos(c.toRad())*Math.sin(f/2)*Math.sin(f/2),h=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),i=6371*h;return i}};var SpaceObject=function(a,b){this.name=a.name,this.lat=a.lat,this.lon=a.lon,this.user=b,this.minimumDistance=16378,this.distance=a.distance};SpaceObject.prototype={setVisibility:function(a){if(this.isClose(this.distance)){var b=this.getDirectionDegree(a.latitude,a.longitude,this.lat,this.lon),c=this.getCardinalDirection(b);this.user.setSpaceObjectProperties({name:this.name,visible:!0,direction:c})}else this.user.setSpaceObjectProperties({name:this.name,visible:!1})},isClose:function(){return this.minimumDistance?this.distance<this.minimumDistance:!1},getDirectionDegree:function(a,b,c,d){a=a.toRad(),c=c.toRad();var e=(d-b).toRad(),f=Math.sin(e)*Math.cos(c),g=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(e);return(Math.atan2(f,g).toDegree()+360)%360},getCardinalDirection:function(a){for(var b=[[22.5,"north"],[67.5,"northeast"],[112.5,"east"],[157.5,"southeast"],[202.5,"south"],[247.5,"southwest"],[292.5,"west"],[337.5,"northwest"],[360,"north"]],c=0;c<b.length;c++){var d=b[c][0],e=b[c][1];if(d>a)return e}}},Number.prototype.toRad=function(){return this*Math.PI/180},Number.prototype.toDegree=function(){return this/Math.PI*180};var View=function(){this.messages={spaceObject:{visibility:{"true":{title:function(){return"Look up!"},text:function(a,b){return b?"You might be able to see the ISS to the "+a+"! Tweet to @NASA_Astronauts!":"ISS in the "+a+"! Tweet to @NASA_Astronauts!"}},"false":{title:function(){return"It's gone!"},text:function(){return"Sorry, the ISS is not visible around you!"}}}}}};View.prototype={notify:function(a,b,c,d){a=a.toLowerCase(),b=b.toString();var e=this.messages[a],f=(e.visibility[b].title(),e.visibility[b].text(c,d));Pebble.sendAppMessage({0:f})}};var User=function(a){this.lastCoordUpdate=null,this.spaceObject={name:null,visible:!1,direction:null},this.view=a.view,this.coords={},this.darkOut=!1};User.prototype={getLocation:function(a,b){if(this.staleCoordinates()){var c=this;navigator.geolocation.getCurrentPosition(function(d){c.findCoordinates(d),a(b,c)})}else a(b,this)},findCoordinates:function(a){this.lastCoordUpdate=a.timestamp,this.coords={latitude:a.coords.latitude,longitude:a.coords.longitude,altitude:a.coords.altitude}},staleCoordinates:function(){var a=(new Date).getTime();return a-this.lastCoordUpdate>3e4},isDarkOut:function(){var a=this.lastCoordUpdate,b=SunCalc.getTimes(a,this.coords.latitude,this.coords.longitude),c=b.nauticalDusk.getTime(),d=b.nauticalDawn.getTime();return a>c||d>a},setSpaceObjectProperties:function(a){(this.spaceObject.visible!=a.visible||this.spaceObject.direction!=a.direction)&&(this.spaceObject.visible=a.visible,this.spaceObject.direction=a.direction,this.view.notify(a))}},SatAlert={},Pebble.addEventListener("ready",function(){SatAlert.view=new View,SatAlert.user=new User({view:SatAlert.view}),SatAlert.satelliteFactory=new SatelliteFactory({user:SatAlert.user})}),Pebble.addEventListener("appmessage",function(){var a={url:"http://www.celestrak.com/NORAD/elements/stations.txt"},b=SatAlert.satelliteFactory.okCallback.bind(SatAlert.satelliteFactory),c=SatAlert.satelliteFactory.errorCallback.bind(SatAlert.satelliteFactory);Ajax.request(a,b,c)});